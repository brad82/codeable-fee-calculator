<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Service Fee Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
    }

    .calculator {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .calculator input,
    .calculator select {
      margin: 10px 0;
      padding: 10px;
      width: 100%;
    }

    .calculator input[type="number"] {
      width: calc(100% - 22px);
    }

    .calculator .radio-group {
      display: flex;
      justify-content: space-between;
    }

    .calculator .radio-group label {
      flex: 1;
      margin: 0 5px;
    }

    .result {
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <div class="calculator">
    <h2>Service Fee Calculator</h2>
    <label for="serviceFee">Service Fee (%)</label>
    <div id="serviceFee" class="radio-group">
      <label><input type="radio" name="serviceFee" value="17.5" checked> 17.5%</label>
      <label><input type="radio" name="serviceFee" value="15"> 15%</label>
    </div>
    <label for="baseRate">Base Rate (Currency)</label>
    <select id="baseRate" onchange="calculate()">
      <option value="1" data-symbol="£">GBP</option>
    </select>
    <label for="takehome">Takehome Amount (Base Currency)</label>
    <input type="number" id="takehome" placeholder="Enter takehome amount" oninput="calculate()">
    <div class="result" id="result"></div>
  </div>

  <script>
    document.querySelectorAll('input[name="serviceFee"]').forEach(radio => {
      radio.addEventListener('change', calculate);
    });

    async function fetchExchangeRates() {
      const response = await fetch('https://v6.exchangerate-api.com/v6/8c7eb062202358c0efda4388/latest/USD');
      const data = await response.json();
      const rates = data.conversion_rates;

      const baseRateDropdown = document.getElementById('baseRate');
      for (const currency in rates) {
        if (currency === 'USD') continue; // Skip USD as it is the base currency
        const option = document.createElement('option');
        option.value = rates[currency];
        option.text = currency;
        option.setAttribute('data-symbol', getCurrencySymbol(currency));
        baseRateDropdown.appendChild(option);
      }
    }

    function getCurrencySymbol(currency) {
      const symbols = {
        USD: '$', EUR: '€', GBP: '£', // Add more symbols as needed
        // Add symbols for other currencies if needed
      };
      return symbols[currency] || currency;
    }

    function calculate() {
      const serviceFee = parseFloat(document.querySelector('input[name="serviceFee"]:checked').value) / 100;
      const takehome = parseFloat(document.getElementById('takehome').value);
      const baseRate = parseFloat(document.getElementById('baseRate').value);

      if (isNaN(takehome) || takehome <= 0 || isNaN(baseRate)) {
        document.getElementById('result').innerText = 'Please enter a valid takehome amount.';
        return;
      }

      const takehomeInUSD = takehome / baseRate;
      const estimate = takehomeInUSD / 0.9;
      const billedToClient = estimate * (1 + serviceFee);

      document.getElementById('result').innerHTML = `
                <p>Estimate: $${estimate.toFixed(2)}</p>
                <p>Billed to Client: $${billedToClient.toFixed(2)}</p>
            `;
    }

    fetchExchangeRates();
  </script>
</body>

</html>